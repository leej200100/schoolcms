# web服务
frontend webservs

# 绑定80端口，域名不限
bind *:80

# 定义静态规则
acl url_static path_beg -i /static /images /javascript /stylesheets
acl url_static path_end -i .jpg .gif .png .css .js .html
acl host_static hdr_beg(host) -i img. imgs. video. videos. ftp. image. download.

# 定义动态规则
acl url_php path_end -i .php

# 后端请求归纳
use_backend static if url_static or host_static
use_backend dynamic if url_php

# 默认动态组
default_backend dynamic

# 静态请求处理
backend static
# 分配算法（轮流分配）
balance roundrobin
# 实际处理请求的服务器列表
server node1 192.168.0.100:80 check maxconn 3000

# 动态请求处理
backend dynamic
# 分配算法（轮流分配）
balance roundrobin
# 实际处理请求的服务器列表
server node1 192.168.0.106:80 check maxconn 3000
server node2 192.168.0.107:80 check maxconn 3000